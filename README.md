# file-storage-service

–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π REST API —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ JWT, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è, –æ–±–Ω–æ–≤–ª—è—Ç—å —Ç–æ–∫–µ–Ω—ã –∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —Ñ–∞–π–ª–∞–º–∏.

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è, –£–¥–∞–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞, –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞.
- **–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏**: –ó–∞–≥—Ä—É–∑–∫–∞, —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞–∂–¥–æ–º —Ñ–∞–π–ª–µ.

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Node.js
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: MySQL
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: Express.js, Prisma, Multer, jsonwebtoken, Bcrypt 


## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

| –ù–∞–∑–≤–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ                                        |
|:-------------------:|:------------------------------------------------|
|      `domain`       | –ë–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã                    |
|    `application`    | Use cases –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞                       |
|  `infrastructure`   | –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Server, Database, Cache, Logger, IoC |
|     `adapters`      | –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã / –ü—Ä–µ–∑–µ–Ω—Ç–µ—Ä—ã                        |
|      `config`       | –ö–æ–Ω—Ñ–∏–≥–∏ –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä—É—Ç—Å—è –∏–∑ .env                 |


## üöÄ API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
| –ú–µ—Ç–æ–¥    | –ü—É—Ç—å                     | –û–ø–∏—Å–∞–Ω–∏–µ                                           |
|----------|:-------------------------|:---------------------------------------------------|
| **POST** | ``/signin``              | –ü–æ–ª—É—á–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞ –ø–æ `userId` –∏ `password`.     |
| **POST** | ``/signin/update_token`` | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ JWT-—Ç–æ–∫–µ–Ω–∞ –ø–æ refresh-token.            |
| **POST** | ``/signup``              | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.                   |
| **GET**  | ``/info``                | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ.       |
| **GET**  | ``/logout``              | –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–∫–µ–Ω–∞.      | 

### –†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏
| –ú–µ—Ç–æ–¥      | –ü—É—Ç—å               | –û–ø–∏—Å–∞–Ω–∏–µ                                                     |
|------------|:-------------------|:-------------------------------------------------------------|
| **POST**   | ``/file/upload``   | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –µ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.     |
| **GET**    | ``/file/list``     | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏.  |
| **DELETE** | ``/file/delete``   | –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.        |
| **GET**    | ``/file/``         | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Ñ–∞–π–ª–µ.                      |
| **GET**    | ``/file/download`` | –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞.                                            | 
| **PUT**    | ``/file/update``   | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞ –≤ –±–∞–∑–µ –∏ –ª–æ–∫–∞–ª—å–Ω–æ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.               |
---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/username/file-storage-service.git
cd file-storage-service
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
npm install
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`, —Å–∫–æ–ø–∏—Ä–æ–≤–∞–≤ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–≤ `.env.example`, –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:

| –ù–∞–∑–≤–∞–Ω–∏—è                      | –¢–∏–ø      | –ü—Ä–∏–º–µ—Ä                      | –û–ø–∏—Å–∞–Ω–∏–µ                                                    |
|-------------------------------|:---------|:----------------------------|:------------------------------------------------------------|
| `SERVER_HOST`                 | `STRING` | `127.0.0.1`                 | –•–æ—Å—Ç —Å–µ—Ä–≤–µ—Ä–∞                                                |
| `SERVER_PORT`                 | `NUMBER` | `3000`                      | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞                                                |
| `SERVER_CORS_ORIGIN`          | `STRING` | `https://example.com`       | –†–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–ª—è CORS (–º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å "*" –¥–ª—è –≤—Å–µ—Ö) |
| `DATABASE_URL`                | `STRING` | `mysql://user:pass@host/db` | URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MySQL –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Prisma            |
| `USER_PASSWORD_SALT_LENGTH`   | `NUMBER` | `8`                         | –î–ª–∏–Ω–∞ —Å–æ–ª–∏ –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª—è                           |
| `USER_JWT_REFRESH_SECRET`     | `STRING` | `your_jwt_secret`           | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT refresh —Ç–æ–∫–µ–Ω–æ–≤              |
| `USER_JWT_ACCESS_EXPIRATION`  | `STRING` | `600s`                      | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ access —Ç–æ–∫–µ–Ω–∞ (10 –º–∏–Ω—É—Ç = 600 —Å–µ–∫—É–Ω–¥)           |
| `USER_JWT_REFRESH_EXPIRATION` | `STRING` | `7d`                        | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ refresh —Ç–æ–∫–µ–Ω–∞ (7 –¥–Ω–µ–π)                         |
| `FILE_STORAGE_PATH`           | `STRING` | `/tmp`                      | –ü—É—Ç—å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤                                    |

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```shell
# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
npx prisma migrate dev

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è Prisma Client
npx prisma generate
```

### 5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞

```shell
npm run dev
```

## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω
–î–ª—è —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –æ–∫—Ä—É–∂–µ–Ω–∏–∏:
```shell
npm run build
npm start
```
